import { NetMessage } from './primitives/messages/messages';
import { RelayBlock } from './primitives/RelayBlock/RelayBlock';

// // const hex = '000000010f097363696e74696c6c61b4c752b5000003b00000003a00000002000001986630677da1b6fd82ef311017e3b8498eed54716549858dc5c2b25ddadc3dec4e6e1908620d7363742e79676764726173696c00000236b1045b7b2276657273696f6e223a312c226b696e64223a225452414e53414354494f4e222c22636c7573746572223a22636f72652e62616e6b696e67222c22616374696f6e223a224d494e54222c2274797065223a224153534554222c2264617461223a7b226173736574223a22534354222c22616d6f756e74223a32353030303030303030302c22726563697069656e74223a227363696e74696c6c61227d2c2274696d657374616d70223a313735343036313130353031302c2266656573223a5b5d2c2274696d656c6f636b223a7b2273746172745469636b223a302c22656e645469636b223a307d2c22617574686f72697a6174696f6e73223a5b7b227369676e6174757265223a226461633739333832346662323838643337386234343364633830343238363935396264656337663964343938356336623532363432636430313061343934346230353233306565656361643032326438306531333439386235373935616630326439333265373830336633376634303238666439393363366536366266393262222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d7d5d027b7d000001345b7b227369676e6174757265223a226437396331396137636337306161616335383538633666383264643836373039323963313236343234633861343932393134343663393037353064653666353133323937363238653461363834643266616330616466663563396463376137333130636566666436313332666266366539386433623332386533663938306166222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d';

// // const relayBlock = RelayBlock.fromHex(hex);

// // console.log(relayBlock);
// // 

// const json = {"block":{"header":{"timestamp":"2025-08-01T15:13:45.013Z","epoch":4,"previousHash":"3d1441d7dba0e60d907b86eaab74eca5ebc38f265a099f39fae4698b4e6d91b3","proposer":"sct.yggdrasil"},"payload":{"actions":[{"version":1,"kind":"TRANSACTION","cluster":"core.banking","action":"MINT","type":"ASSET","data":{"asset":"SCT","amount":25000000000,"recipient":"scintilla"},"timestamp":1754061225006,"fees":[],"timelock":{"startTick":0,"endTick":0},"authorizations":[{"signature":"dac793824fb288d378b443dc804286959bdec7f9d4985c6b52642cd010a4944b05230eeecad022d80e13498b5795af02d932e7803f37f4028fd993c6e66bf92b","publicKey":"0366d96b52399740e417bc588c95cd1f2719555fc4e6f5ea0efa5b043f7240b073","address":"sct1u9wghesd5wpy3gm8c8jgwpvuxxrd43h33fe6lr","moniker":"sct.yggdrasil"}]},{"version":1,"kind":"TRANSACTION","cluster":"core.banking","action":"CREATE","type":"VOUCHER","data":{"version":1,"asset":"sct","inputs":[{"moniker":"scintilla","amount":"14000000000"}],"output":{"amount":"14000000000","recipient":"scintilla"},"stack":[],"data":[],"timelock":{"startAt":"0","endAt":"0","createdAt":"1754061225018"},"authorizations":[{"signature":"6867c22a81216a7a166a458412688d2e7cf0be655fd7eeb2bfd8fb5b5ca073544bebd0525a3953c4ad7f13c05b5a34fcd0cc2e64644c0f1de6624cd469557fac","publicKey":"0366d96b52399740e417bc588c95cd1f2719555fc4e6f5ea0efa5b043f7240b073","address":"sct1u9wghesd5wpy3gm8c8jgwpvuxxrd43h33fe6lr","moniker":"sct.yggdrasil"}]},"timestamp":1754061225027,"fees":[],"timelock":{"startTick":0,"endTick":0},"authorizations":[{"signature":"5e107e1d3061bb49b624e3a49018afae19babbcf2d24dab643b817dc1b8bfce9218dfede65e8b9818dfcf974c702eaa68f619ba06bf260036bcbcb16407de5ba","publicKey":"0366d96b52399740e417bc588c95cd1f2719555fc4e6f5ea0efa5b043f7240b073","address":"sct1u9wghesd5wpy3gm8c8jgwpvuxxrd43h33fe6lr","moniker":"sct.yggdrasil"}]},{"version":1,"kind":"TRANSACTION","cluster":"core.banking","action":"CREATE","type":"VOUCHER","data":{"version":1,"asset":"sct","inputs":[{"moniker":"scintilla","amount":"11000000000"}],"output":{"amount":"11000000000","recipient":"sct.yggdrasil"},"stack":[],"data":[],"timelock":{"startAt":"0","endAt":"0","createdAt":"1754061225030"},"authorizations":[{"signature":"9bb529ea4ba7b3502d34bf8c08a534ae27bb276d7bfdfd44c31ba7ed39ba15c354c97bb17946756c4f300958bd45b0b93c4978e08043a681bd53b92acac60653","publicKey":"0366d96b52399740e417bc588c95cd1f2719555fc4e6f5ea0efa5b043f7240b073","address":"sct1u9wghesd5wpy3gm8c8jgwpvuxxrd43h33fe6lr","moniker":"sct.yggdrasil"}]},"timestamp":1754061225033,"fees":[],"timelock":{"startTick":0,"endTick":0},"authorizations":[{"signature":"5e107e1d3061bb49b624e3a49018afae19babbcf2d24dab643b817dc1b8bfce9218dfede65e8b9818dfcf974c702eaa68f619ba06bf260036bcbcb16407de5ba","publicKey":"0366d96b52399740e417bc588c95cd1f2719555fc4e6f5ea0efa5b043f7240b073","address":"sct1u9wghesd5wpy3gm8c8jgwpvuxxrd43h33fe6lr","moniker":"sct.yggdrasil"}]}],"clusters":{}},"signatures":[{"signature":"20dbd67b84bd9302b21632eab9c7119da52bb35db136fa735305af5db380df67775940fec03173187d124658b34d5f8e46d26d8ee559b4e3a0e51c608f5028ae","publicKey":"0366d96b52399740e417bc588c95cd1f2719555fc4e6f5ea0efa5b043f7240b073","address":"sct1u9wghesd5wpy3gm8c8jgwpvuxxrd43h33fe6lr","moniker":"sct.yggdrasil"}]},"hash":"32b7a5744122b9b728b6ee55397ec45f4ebea010b55a8abbfb930eb5cc657dfb"};
// // // @ts-ignore
// // const relayBlock2 = new RelayBlock(json.block);

// // // console.log('Parsed json header', relayBlock2.header);
// // // @ts-ignore
// // const hex2 = relayBlock2.toHex();

// // // console.log(hex2);

// // const parsed = RelayBlock.fromHex(hex2);

// // console.log(parsed);

// // @ts-ignore
// // console.log(RelayBlock.fromBuffer(new RelayBlock(json.block).toBuffer()))
// // @ts-ignore
// const relayBlock = new RelayBlock(json.block);
// // @ts-ignore
// const message = new NetMessage({
//     // @ts-ignore   
//     chain: Buffer.from('a1d691a8', 'hex'),
//     // @ts-ignore
//     kind: 'RELAYBLOCK',
//     cluster: 'scintilla',
//     payload: relayBlock.toBuffer()
// })
// // console.log(message.toHex())

// const buffer = message.toBuffer();
// console.log({buffer});
// const parsed = NetMessage.fromBuffer(buffer);
// console.log(parsed);



// // const message = 'a1d691a8000000010f097363696e74696c6c616cb3dc3d000003cba1d691a8000000010f097363696e74696c6c612c2d00fd000003b00000003a0000000b000001986638a4cff22a7cb305fc484d85dd29b04db205be0efae390edbbcfbfa283dbe46218ada00d7363742e79676764726173696c00000236b1045b7b2276657273696f6e223a312c226b696e64223a225452414e53414354494f4e222c22636c7573746572223a22636f72652e62616e6b696e67222c22616374696f6e223a224d494e54222c2274797065223a224153534554222c2264617461223a7b226173736574223a22534354222c22616d6f756e74223a32353030303030303030302c22726563697069656e74223a227363696e74696c6c61227d2c2274696d657374616d70223a313735343036313634353030352c2266656573223a5b5d2c2274696d656c6f636b223a7b2273746172745469636b223a302c22656e645469636b223a307d2c22617574686f72697a6174696f6e73223a5b7b227369676e6174757265223a226461633739333832346662323838643337386234343364633830343238363935396264656337663964343938356336623532363432636430313061343934346230353233306565656361643032326438306531333439386235373935616630326439333265373830336633376634303238666439393363366536366266393262222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d7d5d027b7d000001345b7b227369676e6174757265223a223337383536616532363532643462373934376365303364626662396534343937376234633963306464393663643266633338313235333437623437326534613636663230623935366137373636646663633739653161666135323463323137613939666463616464306531373062386534386336656336346266373938313565222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d';
// // const messageparsed = NetMessage.fromHex(message);
// // console.log(messageparsed);


// // // @ts-ignore
// // const relayBlock2 = RelayBlock.fromBuffer(parsed.payload);
// // console.log(relayBlock);

const hex  = 'a1d691a8000000010f097363696e74696c6c613463ed8afe170000003a0000000100000198667511d1fcb47eea5c2777d212db544af29cfdcfd0b8c6fe9c23dd8f428208e1f79cf55d0d7363742e79676764726173696c00000a84ff145b7b2276657273696f6e223a312c226b696e64223a225452414e53414354494f4e222c22636c7573746572223a22636f72652e62616e6b696e67222c22616374696f6e223a224d494e54222c2274797065223a224153534554222c2264617461223a7b226173736574223a22534354222c22616d6f756e74223a32353030303030303030302c22726563697069656e74223a227363696e74696c6c61227d2c2274696d657374616d70223a313735343036353630353031312c2266656573223a5b5d2c2274696d656c6f636b223a7b2273746172745469636b223a302c22656e645469636b223a307d2c22617574686f72697a6174696f6e73223a5b7b227369676e6174757265223a226461633739333832346662323838643337386234343364633830343238363935396264656337663964343938356336623532363432636430313061343934346230353233306565656361643032326438306531333439386235373935616630326439333265373830336633376634303238666439393363366536366266393262222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d7d2c7b2276657273696f6e223a312c226b696e64223a225452414e53414354494f4e222c22636c7573746572223a22636f72652e62616e6b696e67222c22616374696f6e223a22435245415445222c2274797065223a22564f5543484552222c2264617461223a7b2276657273696f6e223a312c226173736574223a22736374222c22696e70757473223a5b7b226d6f6e696b6572223a227363696e74696c6c61222c22616d6f756e74223a223134303030303030303030227d5d2c226f7574707574223a7b22616d6f756e74223a223134303030303030303030222c22726563697069656e74223a227363696e74696c6c61227d2c22737461636b223a5b5d2c2264617461223a5b5d2c2274696d656c6f636b223a7b2273746172744174223a2230222c22656e644174223a2230222c22637265617465644174223a2231373534303635363035303332227d2c22617574686f72697a6174696f6e73223a5b7b227369676e6174757265223a223638363763323261383132313661376131363661343538343132363838643265376366306265363535666437656562326266643866623562356361303733353434626562643035323561333935336334616437663133633035623561333466636430636332653634363434633066316465363632346364343639353537666163222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d7d2c2274696d657374616d70223a313735343036353630353033372c2266656573223a5b5d2c2274696d656c6f636b223a7b2273746172745469636b223a302c22656e645469636b223a307d2c22617574686f72697a6174696f6e73223a5b7b227369676e6174757265223a223565313037653164333036316262343962363234653361343930313861666165313962616262636632643234646162363433623831376463316238626663653932313864666564653635653862393831386466636639373463373032656161363866363139626130366266323630303336626362636231363430376465356261222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d7d2c7b2276657273696f6e223a312c226b696e64223a225452414e53414354494f4e222c22636c7573746572223a22636f72652e62616e6b696e67222c22616374696f6e223a22435245415445222c2274797065223a22564f5543484552222c2264617461223a7b2276657273696f6e223a312c226173736574223a22736374222c22696e70757473223a5b7b226d6f6e696b6572223a227363696e74696c6c61222c22616d6f756e74223a223131303030303030303030227d5d2c226f7574707574223a7b22616d6f756e74223a223131303030303030303030222c22726563697069656e74223a227363742e79676764726173696c227d2c22737461636b223a5b5d2c2264617461223a5b5d2c2274696d656c6f636b223a7b2273746172744174223a2230222c22656e644174223a2230222c22637265617465644174223a2231373534303635363035303430227d2c22617574686f72697a6174696f6e73223a5b7b227369676e6174757265223a223962623532396561346261376233353032643334626638633038613533346165323762623237366437626664666434346333316261376564333962613135633335346339376262313739343637353663346633303039353862643435623062393363343937386530383034336136383162643533623932616361633630363533222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d7d2c2274696d657374616d70223a313735343036353630353034332c2266656573223a5b5d2c2274696d656c6f636b223a7b2273746172745469636b223a302c22656e645469636b223a307d2c22617574686f72697a6174696f6e73223a5b7b227369676e6174757265223a223565313037653164333036316262343962363234653361343930313861666165313962616262636632643234646162363433623831376463316238626663653932313864666564653635653862393831386466636639373463373032656161363866363139626130366266323630303336626362636231363430376465356261222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d7d5d027b7d000001345b7b227369676e6174757265223a223639656163346566323635363936313865383331366234376363623439333238303664373731623563656432663131373630366234643330323663633838393831646633383462383536373934666437353063393239363039343463623639663339326138323435343631333833316663373166663163613862383562666637222c227075626c69634b6579223a22303336366439366235323339393734306534313762633538386339356364316632373139353535666334653666356561306566613562303433663732343062303733222c2261646472657373223a227363743175397767686573643577707933676d3863386a67777076757878726434336833336665366c72222c226d6f6e696b6572223a227363742e79676764726173696c227d5d';
const nm = NetMessage.fromHex(hex)
console.log(nm);
if (nm.payload) {
    console.log(RelayBlock.fromBuffer(nm.payload));
}
// @ts-ignore
// const nm2 = NetMessage.fromBuffer(nm.payload);
// console.log(nm2);
// const relayBlock = RelayBlock.fromBuffer(nm2.payload);
// console.log(relayBlock);